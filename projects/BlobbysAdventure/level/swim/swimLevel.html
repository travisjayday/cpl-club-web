<html>

<head>
   <title>Saving Pacman</title>
   <script src='swimlevel_Player.js'></script>
   <script src='swimLevel_Fish.js'></script>
   <script src='swimLevel_Jellyfish.js'></script>
   <script>
       var ctx;
       var keyboard = {};
       var bkgrndX = 0;
       var bkgrndVel = -2;
       var canvasWidth = 640;
       var canvasHeight = 480;
       var blob = new Player();
       var deathCounter = false;
       var fish = new Fish(); 
       var jellyfish = new Jellyfish();
       var randomJellyfishGen = 0; 
       var randomFishGen = 0; 
       var draw = [1, 2 , 3] 
       var randomSelector = Math.floor(Math.random() * draw.length);
       var key = Math.floor(Math.random() * 2 + 1);
       var index = 0;

    //RANDOM SPAWN FOR EMENIES
        function spawnGenerator() {
            index = randomSelector; 
            randomJellyfishGen = draw[index];
            draw.splice(index, 2);
            index = Math.floor(Math.random() * draw.length);
            randomFishGen = draw[index];
            draw.splice(index, 1);
            index = Math.floor(Math.random() * draw.length);
            draw = [1, 2 ,3]
    
        }

    //GENERATES RANDOM Y FOR FISH
        function heightGenerator () {
            z = Math.floor((Math.random() *465 )); 
            }
    {
    heightGenerator();
    }
        //GENERATES RANDOM Y FOR JELLYFISH 
        function jheightGenerator() {
            c = Math.floor((Math.random() * 430 )); 
        }
     {
    jheightGenerator(); 
     }
       //INITIALIZES CANVAS
        function initCanvas() {
        var canvas = document.getElementById('canvas');
        ctx = canvas.getContext('2d');
        setInterval(drawScreen, 20);
       }

       //DRAWS
       function drawScreen() {
           if (!deathCounter) {
               //BACKGROUND
               ctx.drawImage(document.getElementById('background'), bkgrndX, 0, canvasWidth, canvasHeight);
               ctx.drawImage(document.getElementById('background'), bkgrndX + canvasWidth, 0, canvasWidth, canvasHeight);
               bkgrndX += bkgrndVel;
               if (bkgrndX + canvasWidth < 0) {
                   bkgrndX = 0;
               }

            //FISH OBJECTS DISPLAY 
                if (randomFishGen == key){
                   fish.show();
                   fish.move();
                   fish.hit(); 
               }
                if (!deathCounter){
                   key = Math.floor(Math.random() * 2 + 1);
                   spawnGenerator(); 
               }
               
               //JELLYFISH OBJECTS DISPLAY 
               if (randomJellyfishGen == key){
                    jellyfish.show();
                    jellyfish.move();
                    jellyfish.hit(); 

               }
               if (!deathCounter){
                   key = Math.floor(Math.random() * 2 + 1);
                   spawnGenerator();
               }
               //PLAYER ACTIONS
               blob.show();
               blob.move();
               blob.keyboardInput();
           }
       }
   </script>
</head>

<body onload='initCanvas()'>
   <canvas id='canvas' width='640px' height='480px'></canvas>
   <img hidden src='https://i.imgur.com/YyFjZy9.jpg' id='background'>
   <p>Move Blobby around with the arrow keys! :D</p>
</body>

</html>
